<!-- templates/predict.html (do not remove this comment) -->
{% extends "base.html" %} {% block title %}Prediction{% endblock %} {% block content %}
<div class="text-center">
	<h1>Prediction Page</h1>
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-md-6">
				<img src="{{ masked_image_url }}" class="img-fluid" alt="Masked Image" style="border-radius: 1rem; margin-bottom: 1rem" />
				<div class="card">
					<div class="card-body text-center">
						<p class="card-text">{{ formatted_date }}</p>
						<p class="card-text">Prediction: <strong>{{ prediction }}</strong> kg</p>
						<button class="btn btn-danger" onclick="deleteFiles('{{ filename }}')">Delete</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	function deleteFiles(filename) {
		if (confirm("Are you sure you want to delete this result?")) {
			fetch(`/delete/${filename}`, {
				method: "POST",
				headers: {
					"Content-Type": "application/json",
				},
			})
				.then((response) => response.json())
				.then((data) => {
					if (data.success) {
						alert("Result deleted successfully.");
						window.location.href = "/results";
					} else {
						alert("Error: " + data.error);
					}
				})
				.catch((error) => {
					console.error("Error:", error);
				});
		}
	}
</script>
{% endblock %}
